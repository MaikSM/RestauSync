import{b as F}from"./chunk-4XBRS2GN.js";import{a as n}from"./chunk-GONPXOC7.js";import"./chunk-ASKH5DUS.js";import{a as s}from"./chunk-NMI43S2G.js";import{a as v,c as x,d as p,g as R}from"./chunk-UFL7QPX4.js";import{b as C,c as g,d as S}from"./chunk-7IYL6UTE.js";import"./chunk-JQOZS3TN.js";import{Na as l,R as e,Tb as A,Za as f,ib as d,n as u}from"./chunk-CFQE6O6P.js";import{g as a}from"./chunk-4X36HX5K.js";var k=()=>a(void 0,null,function*(){let t=e(n),o=e(p),r=t.user();if(t.authStatus()==="authenticated"&&r?.role_id===1)return!0;let c=yield u(t.checkAuthStatus()),h=t.user();return c&&h?.role_id===1?!0:(o.navigateByUrl("/"),!1)});var I=(t,o)=>a(void 0,null,function*(){let r=e(n),i=e(p);if(yield u(r.checkAuthStatus()))return!0;let h=o.map(H=>H.path).join("/");return i.navigate(["/auth/login"],{queryParams:{returnUrl:`/${h}`}}),!1});var M=()=>a(void 0,null,function*(){let t=e(n),o=e(p),r=yield u(t.checkAuthStatus()),i=t.user()?.role_id;return r&&i===4||o.navigateByUrl("/"),!0});var y=()=>a(void 0,null,function*(){let t=e(n),o=e(p);return(yield u(t.checkAuthStatus()))?(o.navigateByUrl("/"),!1):!0});var w=[{canMatch:[y],path:"auth",loadChildren:()=>import("./chunk-UBSQ2N5E.js")},{canMatch:[I],path:"private",loadChildren:()=>import("./chunk-D4O7PCVY.js")},{canMatch:[k],path:"admin",loadChildren:()=>import("./chunk-RUAXMONI.js")},{canMatch:[M],path:"waiter",loadChildren:()=>import("./chunk-KYHXXZQL.js")},{path:"",loadChildren:()=>import("./chunk-6LNHHDFU.js")},{path:"**",title:"Not Found",loadComponent:()=>import("./chunk-RFVXED2T.js")}];function U(t,o){let i=e(n).token();if(t.url.includes(`${s.apiUrl}/auth/login`)||t.url.includes(`${s.apiUrl}/auth/check-token`)||t.url.includes(`${s.apiUrl}/platos-public`))return console.log("\u{1F510} AuthInterceptor: Skipping token for auth or public endpoint:",t.url),o(t);if(!i)return console.warn("\u26A0\uFE0F AuthInterceptor: No token available for request:",t.url),o(t);let c=t.clone({headers:t.headers.set("Authorization",`Bearer ${i}`)});return console.log("\u{1F510} AuthInterceptor: Adding token to request:",t.url),console.log("\u{1F511} Token length:",i.length),o(c)}var G={providers:[A({eventCoalescing:!0}),R(w),C(S(),g([U]))]};var m=class t{static \u0275fac=function(r){return new(r||t)};static \u0275cmp=l({type:t,selectors:[["app-root"]],decls:2,vars:1,consts:[["position","top-right","richColors","","closeButton","",3,"expand"]],template:function(r,i){r&1&&d(0,"ngx-sonner-toaster",0)(1,"router-outlet"),r&2&&f("expand",!0)},dependencies:[x,F],encapsulation:2})};v(m,G).catch(t=>console.error(t));
