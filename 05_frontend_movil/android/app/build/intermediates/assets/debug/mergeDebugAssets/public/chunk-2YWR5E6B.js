import{a as M}from"./chunk-LDKFQ7O5.js";import{a as _,b as i,c as S,d as E,g as F,i as w,j as A,q as N,s as I}from"./chunk-AG2IGI7A.js";import{a as n}from"./chunk-4XBRS2GN.js";import{a as R}from"./chunk-ASKH5DUS.js";import{b as C,d as D}from"./chunk-UFL7QPX4.js";import{q as x}from"./chunk-JQOZS3TN.js";import{Aa as m,Bb as a,Db as b,Na as h,R as l,Za as v,bc as c,cc as y,gb as o,hb as t,i as f,ib as u,ma as g,pb as d}from"./chunk-CFQE6O6P.js";var B=class p{constructor(){y(()=>{!this.isCreateMode()&&this.roleData.hasValue()&&this.form.patchValue({name:this.roleData.value()?.name,description:this.roleData.value()?.description})})}_rolesService=l(M);_route=l(C);_router=l(D);_formBuilder=l(N);currentUrl=g(this._router.url);isCreateMode=c(()=>this.currentUrl().endsWith("/create"));roleId=c(()=>this.isCreateMode()?null:Number(this._route.snapshot.paramMap.get("id")));roleData=R({loader:()=>this.roleId()===null?f(Promise.resolve(null)):this._rolesService.getById(this.roleId())});form=this._formBuilder.group({name:["",[i.required,i.minLength(4),i.maxLength(100)]],description:["",[i.required,i.minLength(4),i.maxLength(255)]]});onCleanForm(){this.form.reset()}onSubmit(){try{if(this.form.invalid){n.error("Error al Crear el Registro",{description:"Por Favor Verifique los Campos",duration:3e3});return}let e={id:this.isCreateMode()?0:this.roleId(),name:this.form.value.name,description:this.form.value.description};this.isCreateMode()?this._rolesService.create(e).subscribe({next:()=>{n.success("Registro Creado",{description:`El registro: ${e.name}, se cre\xF3 correctamente `,duration:3e3}),this._router.navigate(["/admin/roles"])},error:r=>{console.error(r),n.error("Error al Crear el Registro",{description:"Error al crear el registro, por favor intente nuevamente.",duration:3e3})}}):this._rolesService.updateById(this.roleId(),e).subscribe({next:()=>{n.success("Registro Actualizado",{description:`El registro: ${e.name}, se actualiz\xF3 correctamente `,duration:3e3}),this._router.navigate(["/admin/roles"])},error:r=>{console.error(r),n.error("Error al Actualizar el Registro",{description:"Error al actualizar el registro, por favor intente nuevamente.",duration:3e3})}})}catch(e){console.error(e),n.error("Error al Procesar el Registro",{description:"Error al crear el registro, por favor intente nuevamente.",duration:3e3})}}static \u0275fac=function(r){return new(r||p)};static \u0275cmp=h({type:p,selectors:[["admin-roles-form"]],decls:22,vars:2,consts:[[1,"bg-gray-900","text-gray-100","min-h-screen","p-6"],[1,"flex","items-center","justify-center","min-h-[70vh]"],[1,"bg-gray-800","rounded-xl","shadow-lg","border","border-gray-700","w-full","max-w-sm"],[1,"p-6"],[1,"text-2xl","font-bold","text-center","text-orange-500","mb-6"],[1,"space-y-4",3,"ngSubmit","formGroup"],["for","name",1,"block","text-sm","font-bold","text-orange-400","mb-2"],["type","text","placeholder","supervisor","formControlName","name",1,"w-full","px-3","py-2","bg-gray-700","border","border-gray-600","rounded-md","text-gray-100","placeholder-gray-400","focus:outline-none","focus:ring-2","focus:ring-orange-500"],["for","description",1,"block","text-sm","font-bold","text-orange-400","mb-2"],["type","text","formControlName","description","placeholder","Editor de contenidos",1,"w-full","px-3","py-2","bg-gray-700","border","border-gray-600","rounded-md","text-gray-100","placeholder-gray-400","focus:outline-none","focus:ring-2","focus:ring-orange-500"],[1,"flex","justify-around","gap-1","mt-6"],[1,"w-full"],["type","submit",1,"btn","bg-orange-500","hover:bg-orange-600","text-white","w-full"],["type","button",1,"btn","bg-gray-600","hover:bg-gray-700","text-white","w-full",3,"click"]],template:function(r,s){r&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4),a(5," \u{1F464} Datos del Rol "),t(),o(6,"form",5),d("ngSubmit",function(){return s.onSubmit()}),o(7,"div")(8,"label",6),a(9," Nombre "),t(),u(10,"input",7),t(),o(11,"div")(12,"label",8),a(13," Descripci\xF3n "),t(),u(14,"input",9),t(),o(15,"div",10)(16,"div",11)(17,"button",12),a(18),t()(),o(19,"div",11)(20,"button",13),d("click",function(){return s.onCleanForm()}),a(21," \u{1F9F9} Limpiar "),t()()()()()()()()),r&2&&(m(6),v("formGroup",s.form),m(12),b(" ",s.roleId()===null?"\u2795 Crear":"\u{1F4BE} Actualizar"," "))},dependencies:[x,I,F,_,S,E,w,A],encapsulation:2,changeDetection:0})};export{B as a};
