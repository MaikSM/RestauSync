import{a as S,b as r,c as y,d as P,g as w,i as _,j as N,q as E,s as A}from"./chunk-AG2IGI7A.js";import{a as m}from"./chunk-4XBRS2GN.js";import{a as F}from"./chunk-GONPXOC7.js";import"./chunk-ASKH5DUS.js";import"./chunk-NMI43S2G.js";import{d as C}from"./chunk-UFL7QPX4.js";import"./chunk-7IYL6UTE.js";import{q as x}from"./chunk-JQOZS3TN.js";import{Aa as c,Bb as o,Na as f,R as l,Za as v,bc as b,cc as g,gb as i,hb as t,ib as a,ma as s,pb as h}from"./chunk-CFQE6O6P.js";import"./chunk-4X36HX5K.js";var u=class p{constructor(){g(()=>{let e=this.currentUser();e&&this.profileForm.patchValue({name:e.name||"",surname:e.surname||"",email:e.email||"",password:""})})}_authService=l(F);currentUser=b(()=>this._authService.user());_router=l(C);_formBuilder=l(E);hasError=s(!1);isPosting=s(!1);profileForm=this._formBuilder.group({name:["",[r.required,r.minLength(4),r.maxLength(50)]],surname:["",[r.required,r.minLength(4),r.maxLength(50)]],email:["",[r.required,r.pattern(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/)]],password:["",[r.required,r.minLength(8)]]});onSubmit(){try{if(this.profileForm.invalid){m.error("Actualizaci\xF3n Fallida",{duration:2e3,description:"Por Favor, Completa Todos los Campos Requeridos"});return}let e={name:this.profileForm.controls.name.value,surname:this.profileForm.controls.surname.value,email:this.profileForm.controls.email.value,password:this.profileForm.controls.password.value,role_id:this.currentUser()?.role_id,created_at:this.currentUser()?.created_at};console.log(e),this.isPosting.set(!0),this._authService.updateProfile(e).subscribe(n=>{if(n){m.success("Actualizaci\xF3n Exitosa!",{duration:2e3,description:"Bienvenido Nuevamente"}),this._router.navigateByUrl("/");return}m.error("Actualizaci\xF3n Fallida",{duration:2e3,description:"Intentelo Nuevamente"}),this.isPosting.set(!1)})}catch(e){console.error(e)}}static \u0275fac=function(n){return new(n||p)};static \u0275cmp=f({type:p,selectors:[["private-profile-page"]],decls:30,vars:1,consts:[[1,"min-h-[70vh]","flex","items-center","justify-center","bg-base-200","py-2","px-4"],[1,"card","w-full","max-w-lg","bg-base-100","shadow-md"],[1,"card-body"],[1,"text-2xl","font-bold","text-center","text-base-content"],[1,"mt-4","space-y-4",3,"ngSubmit","formGroup"],[1,"flex","gap-1","justify-between"],[1,"form-control"],["for","name",1,"label"],[1,"label-text"],["type","text","placeholder","Juan","formControlName","name",1,"input","input-bordered","w-full"],["for","surname",1,"label"],["type","text","placeholder","Benjumea","formControlName","surname",1,"input","input-bordered","w-full"],["for","email",1,"label"],["type","email","placeholder","tu@email.com","formControlName","email",1,"input","input-bordered","w-full"],["for","password",1,"label"],["type","password","formControlName","password",1,"input","input-bordered","w-full"],[1,"form-control","mt-4"],["type","submit",1,"btn","btn-primary","w-full"]],template:function(n,d){n&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),o(4,"Registro"),t(),i(5,"form",4),h("ngSubmit",function(){return d.onSubmit()}),i(6,"div",5)(7,"div",6)(8,"label",7)(9,"span",8),o(10,"Nombre"),t()(),a(11,"input",9),t(),i(12,"div",6)(13,"label",10)(14,"span",8),o(15,"Apellido"),t()(),a(16,"input",11),t()(),i(17,"div",6)(18,"label",12)(19,"span",8),o(20,"Correo Electronico"),t()(),a(21,"input",13),t(),i(22,"div",6)(23,"label",14)(24,"span",8),o(25,"Contrase\xF1a"),t()(),a(26,"input",15),t(),i(27,"div",16)(28,"button",17),o(29," Actualizar "),t()()()()()()),n&2&&(c(5),v("formGroup",d.profileForm))},dependencies:[x,A,w,S,y,P,_,N],encapsulation:2,changeDetection:0})},J=u;export{u as PrivateProfilePageComponent,J as default};
