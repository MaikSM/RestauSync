import{c as v}from"./chunk-SZTE2ZOQ.js";import{j as b,m as P}from"./chunk-IBNRR53B.js";import{Ja as g,Oa as h,Ua as m,bb as r,cb as s,db as f,kb as y,ma as p,ub as l,va as u,wb as C,xa as i}from"./chunk-GQXGSY3T.js";import{e as c}from"./chunk-YEWEO3AL.js";function w(n,t){if(n&1&&(r(0,"div",6),f(1,"img",7),r(2,"p",8),l(3,"Vista previa de la foto"),s()()),n&2){let e=t.ngIf;i(),m("src",e,u)}}var d=class n{isTakingPhoto=p(!1);photoUrl=p(null);ensurePermissions(){return c(this,null,function*(){try{let{Camera:t}=yield import("./chunk-KHF67Z3P.js"),e=yield t.checkPermissions(),o=e.camera==="granted",a=e.photos?e.photos==="granted":!0;(!o||!a)&&(yield t.requestPermissions())}catch{}})}takePhoto(){return c(this,null,function*(){try{this.isTakingPhoto.set(!0),yield this.ensurePermissions();let{Camera:t,CameraResultType:e,CameraSource:o}=yield import("./chunk-KHF67Z3P.js"),a=yield t.getPhoto({source:o.Camera,resultType:e.Uri,quality:80,saveToGallery:!0,correctOrientation:!0,allowEditing:!1}),x=a.webPath??(a.path?v.convertFileSrc(a.path):null);this.photoUrl.set(x??null),console.log("\u{1F4F7} Foto capturada:",{path:a.path,webPath:a.webPath,format:a.format})}catch(t){console.error("\u274C Error al abrir la c\xE1mara o tomar la foto:",t)}finally{this.isTakingPhoto.set(!1)}})}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=g({type:n,selectors:[["front-camera-page"]],decls:9,vars:3,consts:[[1,"max-w-screen-sm","mx-auto","p-4","space-y-4"],[1,"text-xl","sm:text-2xl","font-semibold","text-gray-100"],[1,"flex","gap-2"],[1,"px-4","py-2","bg-orange-500","text-white","font-medium","rounded-lg","hover:bg-orange-600","transition-all","duration-300","shadow-lg","hover:shadow-xl","disabled:opacity-70","disabled:cursor-not-allowed",3,"click","disabled"],["class","mt-4",4,"ngIf"],[1,"text-gray-400","text-sm"],[1,"mt-4"],["alt","Foto capturada",1,"w-full","max-h-96","object-contain","rounded-lg","border","border-gray-600",3,"src"],[1,"text-gray-300","text-sm","mt-2"]],template:function(e,o){e&1&&(r(0,"div",0)(1,"h1",1),l(2,"\u{1F4F7} C\xE1mara"),s(),r(3,"div",2)(4,"button",3),y("click",function(){return o.takePhoto()}),l(5),s()(),h(6,w,4,1,"div",4),r(7,"p",5),l(8," En web, se mostrar\xE1 el selector de archivos como fallback si la c\xE1mara no est\xE1 disponible. "),s()()),e&2&&(i(4),m("disabled",o.isTakingPhoto()),i(),C(" ",o.isTakingPhoto()?"Abriendo c\xE1mara\u2026":"Abrir C\xE1mara"," "),i(),m("ngIf",o.photoUrl()))},dependencies:[P,b],encapsulation:2,changeDetection:0})},U=d;export{d as FrontCameraPageComponent,U as default};
