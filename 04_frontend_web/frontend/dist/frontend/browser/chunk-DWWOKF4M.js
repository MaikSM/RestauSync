import{a as B}from"./chunk-TZQFGA7U.js";import{a as P,b as u,c as N,d as T,g as w,h as q,i as D,j as k,k as I,l as V,m as O,n as G,o as j,q as L,s as $}from"./chunk-AG2IGI7A.js";import"./chunk-NMI43S2G.js";import{d as R}from"./chunk-UFL7QPX4.js";import"./chunk-7IYL6UTE.js";import{q as A}from"./chunk-JQOZS3TN.js";import{Aa as o,Bb as i,Cb as F,Db as M,Na as h,R as p,Sa as c,Wb as E,Za as g,bb as d,eb as y,fb as S,gb as l,hb as n,ib as v,pb as _,qb as C}from"./chunk-CFQE6O6P.js";import{a as x}from"./chunk-4X36HX5K.js";var z=(e,r)=>r.value;function U(e,r){if(e&1&&(l(0,"div",8),i(1),n()),e&2){let a=C();o(),M(" \u26A0\uFE0F ",a.errorMessage," ")}}function H(e,r){e&1&&i(0," El n\xFAmero de mesa es requerido ")}function J(e,r){e&1&&i(0," El n\xFAmero debe ser mayor a 0 ")}function K(e,r){if(e&1&&(l(0,"div",11),c(1,H,1,0)(2,J,1,0),n()),e&2){let a,t,s=C();o(),d(!((a=s.createForm.get("numero"))==null||a.errors==null)&&a.errors.required?1:-1),o(),d(!((t=s.createForm.get("numero"))==null||t.errors==null)&&t.errors.min?2:-1)}}function Q(e,r){e&1&&i(0," La capacidad es requerida ")}function W(e,r){e&1&&i(0," La capacidad debe ser mayor a 0 ")}function X(e,r){e&1&&i(0," La capacidad no puede ser mayor a 20 personas ")}function Y(e,r){if(e&1&&(l(0,"div",11),c(1,Q,1,0)(2,W,1,0)(3,X,1,0),n()),e&2){let a,t,s,m=C();o(),d(!((a=m.createForm.get("capacidad"))==null||a.errors==null)&&a.errors.required?1:-1),o(),d(!((t=m.createForm.get("capacidad"))==null||t.errors==null)&&t.errors.min?2:-1),o(),d(!((s=m.createForm.get("capacidad"))==null||s.errors==null)&&s.errors.max?3:-1)}}function Z(e,r){if(e&1&&(l(0,"option",15),i(1),n()),e&2){let a=r.$implicit;g("value",a.value),o(),F(a.label)}}function ee(e,r){e&1&&(l(0,"div",11),i(1," El estado es requerido "),n())}function te(e,r){e&1&&(v(0,"span",20),i(1," Creando... "))}function ae(e,r){e&1&&i(0," \u2795 Crear Mesa ")}var b=class e{_router=p(R);_fb=p(L);_reservasService=p(B);_cdr=p(E);createForm;isSaving=!1;errorMessage="";estadoOptions=[{value:"libre",label:"Libre"},{value:"reservada",label:"Reservada"},{value:"ocupada",label:"Ocupada"},{value:"mantenimiento",label:"Mantenimiento"}];ngOnInit(){this.createForm=this._fb.group({numero:[null,[u.required,u.min(1)]],capacidad:[null,[u.required,u.min(1),u.max(20)]],estado:["libre",u.required],ubicacion:[""]})}onSave(){if(this.createForm.valid){this.isSaving=!0,this.errorMessage="";let r=x({},this.createForm.value);this._reservasService.createMesa(r).subscribe({next:()=>{this.isSaving=!1,this._cdr.markForCheck(),this._router.navigate(["/admin/reservas-mesas"])},error:a=>{this.isSaving=!1,this._cdr.markForCheck(),a.status===400?this.errorMessage="Datos inv\xE1lidos. Verifique que todos los campos est\xE9n completos correctamente.":a.status===500?this.errorMessage="Error interno del servidor. Intente nuevamente m\xE1s tarde.":a.status===0||!a.status?this.errorMessage="No se pudo conectar al servidor. Verifique su conexi\xF3n a internet.":this.errorMessage=`Error al crear la mesa: ${a.message||"Error desconocido"}`}})}else console.log("Form is invalid, errors:",this.createForm.errors),this.errorMessage="Por favor, complete todos los campos requeridos correctamente",this.isSaving=!1}onCancel(){this._router.navigate(["/admin/reservas-mesas"])}static \u0275fac=function(a){return new(a||e)};static \u0275cmp=h({type:e,selectors:[["admin-reservas-create-mesa-page"]],decls:42,vars:8,consts:[[1,"bg-gray-900","text-gray-100","min-h-screen","p-6"],[1,"max-w-2xl","mx-auto"],[1,"flex","justify-between","items-center","border-b-2","border-orange-500","p-4","bg-gray-800","shadow-md","mb-6","rounded-lg"],[1,"px-6","py-2","rounded-full","bg-orange-500","text-white","text-xl","font-bold","shadow-md"],[1,"btn","bg-gray-600","hover:bg-gray-700","text-white",3,"click"],[1,"bg-gray-800","rounded-xl","shadow-lg","border","border-gray-700"],[1,"p-6"],[1,"space-y-6",3,"ngSubmit","formGroup"],[1,"bg-red-600","text-white","p-4","rounded-lg","mb-4"],[1,"block","text-sm","font-bold","text-orange-400","mb-2"],["type","number","formControlName","numero","placeholder","Ingrese el n\xFAmero de mesa","min","1",1,"w-full","px-3","py-2","bg-gray-700","border","border-gray-600","rounded-md","text-gray-100","placeholder-gray-400","focus:outline-none","focus:ring-2","focus:ring-orange-500"],[1,"text-red-400","text-sm","mt-1"],["type","number","formControlName","capacidad","placeholder","N\xFAmero de personas que pueden sentarse","min","1","max","20",1,"w-full","px-3","py-2","bg-gray-700","border","border-gray-600","rounded-md","text-gray-100","placeholder-gray-400","focus:outline-none","focus:ring-2","focus:ring-orange-500"],["formControlName","estado",1,"w-full","px-3","py-2","bg-gray-700","border","border-gray-600","rounded-md","text-gray-100","focus:outline-none","focus:ring-2","focus:ring-orange-500"],["value",""],[3,"value"],["type","text","formControlName","ubicacion","placeholder","Ej: Terraza, Sal\xF3n principal, etc.",1,"w-full","px-3","py-2","bg-gray-700","border","border-gray-600","rounded-md","text-gray-100","placeholder-gray-400","focus:outline-none","focus:ring-2","focus:ring-orange-500"],[1,"flex","justify-end","gap-3"],["type","button",1,"btn","bg-gray-600","hover:bg-gray-700","text-white",3,"click","disabled"],["type","submit",1,"btn","bg-orange-500","hover:bg-orange-600","text-white","disabled:opacity-50",3,"disabled"],[1,"loading","loading-spinner","loading-sm"]],template:function(a,t){if(a&1&&(l(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"h1",3),i(5," \u{1FA91} Crear Nueva Mesa "),n()(),l(6,"div")(7,"button",4),_("click",function(){return t.onCancel()}),i(8," \u274C Cancelar "),n()()(),l(9,"div",5)(10,"div",6)(11,"form",7),_("ngSubmit",function(){return t.onSave()}),c(12,U,2,1,"div",8),l(13,"div")(14,"label",9),i(15," N\xFAmero de Mesa * "),n(),v(16,"input",10),c(17,K,3,2,"div",11),n(),l(18,"div")(19,"label",9),i(20," Capacidad (personas) * "),n(),v(21,"input",12),c(22,Y,4,3,"div",11),n(),l(23,"div")(24,"label",9),i(25," Estado Inicial * "),n(),l(26,"select",13)(27,"option",14),i(28,"Seleccione un estado"),n(),y(29,Z,2,2,"option",15,z),n(),c(31,ee,2,0,"div",11),n(),l(32,"div")(33,"label",9),i(34," Ubicaci\xF3n "),n(),v(35,"input",16),n(),l(36,"div",17)(37,"button",18),_("click",function(){return t.onCancel()}),i(38," \u274C Cancelar "),n(),l(39,"button",19),c(40,te,2,0)(41,ae,1,0),n()()()()()()()),a&2){let s,m,f;o(11),g("formGroup",t.createForm),o(),d(t.errorMessage?12:-1),o(5),d((s=t.createForm.get("numero"))!=null&&s.invalid&&((s=t.createForm.get("numero"))!=null&&s.touched)?17:-1),o(5),d((m=t.createForm.get("capacidad"))!=null&&m.invalid&&((m=t.createForm.get("capacidad"))!=null&&m.touched)?22:-1),o(7),S(t.estadoOptions),o(2),d((f=t.createForm.get("estado"))!=null&&f.invalid&&((f=t.createForm.get("estado"))!=null&&f.touched)?31:-1),o(6),g("disabled",t.isSaving),o(2),g("disabled",t.createForm.invalid||t.isSaving),o(),d(t.isSaving?40:41)}},dependencies:[A,$,w,V,O,P,q,I,N,T,j,G,D,k],encapsulation:2,changeDetection:0})},ve=b;export{b as AdminReservasCreateMesaPageComponent,ve as default};
