import{a as B}from"./chunk-OVZYRGGJ.js";import{a as N,c as V,f as A,k as L,l as j,m as k,r as R}from"./chunk-AG2IGI7A.js";import"./chunk-NMI43S2G.js";import"./chunk-7IYL6UTE.js";import{l as T,m as W,p as P,q as F}from"./chunk-JQOZS3TN.js";import{Aa as r,Bb as n,Db as m,Gb as y,Hb as v,Ib as _,Na as w,Nb as I,R as f,Rb as O,Sa as p,Wb as D,Z as c,Za as u,_ as g,ab as x,gb as i,hb as a,mb as E,pb as h,qb as b}from"./chunk-CFQE6O6P.js";import{a as C,b as S}from"./chunk-4X36HX5K.js";function J(l,t){if(l&1&&(i(0,"div",26)(1,"h4",28),n(2,"Pedido Activo"),a(),i(3,"div",29)(4,"p",30)(5,"strong"),n(6,"ID:"),a(),n(7),a(),i(8,"p",30)(9,"strong"),n(10,"Cliente:"),a(),n(11),a(),i(12,"p",30)(13,"strong"),n(14,"Items:"),a(),n(15),a(),i(16,"p",31)(17,"strong"),n(18,"Total:"),a(),n(19),I(20,"currency"),a(),i(21,"p",30)(22,"strong"),n(23,"Estado:"),a(),i(24,"span"),n(25),a()()()()),l&2){let e=t.ngIf;r(7),m(" ",e.id," "),r(4),m(" ",e.cliente||"N/A"," "),r(4),m(" ",e.items.length," "),r(4),m(" ",O(20,7,e.total,"COP","symbol","1.0-0")," "),r(5),x(e.estado==="Recibido"?"text-yellow-400":e.estado==="Listo"?"text-green-400":"text-blue-400"),r(),m(" ",e.estado," ")}}function U(l,t){if(l&1){let e=E();i(0,"div",12)(1,"div",13)(2,"h3",14),n(3),a(),i(4,"span",15),n(5),a()(),i(6,"div",16)(7,"div")(8,"label",17),n(9,"Cliente (opcional)"),a(),i(10,"input",18),_("ngModelChange",function(o){let d=c(e).$implicit;return v(d.cliente,o)||(d.cliente=o),g(o)}),h("blur",function(){let o=c(e).$implicit,d=b();return g(d.updateMesaCliente(o))}),a()(),i(11,"div")(12,"label",19),n(13,"Cambiar Estado"),a(),i(14,"select",20),_("ngModelChange",function(o){let d=c(e).$implicit;return v(d.estado,o)||(d.estado=o),g(o)}),h("change",function(){let o=c(e).$implicit,d=b();return g(d.updateMesaEstado(o))}),i(15,"option",21),n(16,"Disponible"),a(),i(17,"option",22),n(18,"Ocupada"),a(),i(19,"option",23),n(20,"Reservada"),a(),i(21,"option",24),n(22,"Mantenimiento"),a()()()(),p(23,J,26,12,"div",25),i(24,"div",26)(25,"p",27),n(26),a()()()}if(l&2){let e=t.$implicit,s=b();x(s.getMesaCardClasses(e)),r(3),m("Mesa ",e.numero,""),r(),x(s.getStatusClasses(e.estado)),r(),m(" ",s.getStatusLabel(e.estado)," "),r(5),y("ngModel",e.cliente),r(4),y("ngModel",e.estado),r(9),u("ngIf",s.getOrderForTable(e.numero)),r(3),m(" Capacidad: ",e.capacidad||4," personas ")}}function $(l,t){l&1&&(i(0,"div",32)(1,"p",33),n(2,"No hay mesas disponibles"),a()())}var M=class l{mesasService=f(B);cdr=f(D);mesas=[];orders=[];refreshInterval;ngOnInit(){this.loadMesas(),this.loadOrders(),this.refreshInterval=window.setInterval(()=>{this.loadMesas(),this.loadOrders()},3e4)}ngOnDestroy(){this.refreshInterval&&clearInterval(this.refreshInterval)}loadMesas(){console.log("Loading mesas..."),this.mesasService.getAll().subscribe({next:t=>{console.log("Mesas loaded:",t),this.mesas=t.map(e=>S(C({},e),{cliente:""})),this.matchOrdersToTables(),this.cdr.detectChanges()},error:t=>{console.error("Error loading mesas:",t),this.loadMockMesas()}})}loadMockMesas(){console.log("Loading mock mesas for development"),this.mesas=[{mesa_id:1,numero:1,capacidad:4,estado:"libre",created_at:new Date().toISOString(),cliente:""},{mesa_id:2,numero:2,capacidad:4,estado:"libre",created_at:new Date().toISOString(),cliente:""},{mesa_id:3,numero:3,capacidad:6,estado:"libre",created_at:new Date().toISOString(),cliente:""},{mesa_id:4,numero:4,capacidad:2,estado:"libre",created_at:new Date().toISOString(),cliente:""}],this.matchOrdersToTables(),this.cdr.detectChanges()}loadOrders(){let t=JSON.parse(localStorage.getItem("pedidos")||"[]");this.orders=t,this.matchOrdersToTables()}matchOrdersToTables(){this.mesas.length&&this.orders.length&&this.mesas.forEach(t=>{let e=this.orders.find(s=>parseInt(s.mesa)===t.numero);e&&(t.cliente=e.cliente,e.estado!=="Completado"&&e.estado!=="Cancelado"&&(t.estado="ocupada"))})}getOrderForTable(t){return this.orders.find(e=>parseInt(e.mesa)===t)}updateMesaEstado(t){console.log("Updating mesa status:",t)}updateMesaCliente(t){console.log("Assigning customer to mesa:",t)}getMesaCardClasses(t){let e="bg-gray-800 p-6 rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 group";switch(t.estado){case"libre":return e+" border-l-4 border-green-500";case"ocupada":return e+" border-l-4 border-red-500";case"reservada":return e+" border-l-4 border-yellow-500";case"mantenimiento":return e+" border-l-4 border-gray-500";default:return e}}getStatusClasses(t){switch(t){case"libre":return"bg-green-500/20 text-green-400";case"ocupada":return"bg-red-500/20 text-red-400";case"reservada":return"bg-yellow-500/20 text-yellow-400";case"mantenimiento":return"bg-gray-500/20 text-gray-400";default:return"bg-gray-500/20 text-gray-400"}}getStatusLabel(t){switch(t){case"libre":return"Disponible";case"ocupada":return"Ocupada";case"reservada":return"Reservada";case"mantenimiento":return"Mantenimiento";default:return t}}static \u0275fac=function(e){return new(e||l)};static \u0275cmp=w({type:l,selectors:[["waiter-mesas-page"]],decls:18,vars:2,consts:[[1,"bg-gray-900","text-gray-100","flex","flex-col","min-h-screen"],[1,"bg-gray-800","shadow-md"],[1,"max-w-7xl","mx-auto","px-6","py-4","flex","justify-between","items-center"],[1,"text-2xl","font-bold","text-orange-500"],[1,"flex-1","max-w-7xl","mx-auto","px-6","py-8"],[1,"flex","justify-between","items-center","mb-6"],[1,"text-xl","font-semibold","text-gray-200"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","xl:grid-cols-4","gap-6"],["class","bg-gray-800 p-6 rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 group",3,"class",4,"ngFor","ngForOf"],["class","text-center py-12",4,"ngIf"],[1,"bg-gray-800","py-4","mt-6"],[1,"max-w-7xl","mx-auto","px-6","flex","justify-between","items-center","text-sm","text-gray-400"],[1,"bg-gray-800","p-6","rounded-xl","shadow-lg","hover:shadow-xl","transition-all","duration-300","group"],[1,"flex","justify-between","items-start","mb-4"],[1,"text-lg","font-bold","text-orange-400"],[1,"px-2","py-1","rounded-full","text-xs","font-medium"],[1,"space-y-3"],[1,"block","text-sm","text-gray-300","mb-1"],["type","text","placeholder","Nombre del cliente",1,"w-full","bg-gray-700","border","border-gray-600","rounded","px-3","py-2","text-sm","focus:border-orange-500","focus:outline-none",3,"ngModelChange","blur","ngModel"],[1,"block","text-sm","text-gray-300","mb-2"],[1,"w-full","bg-gray-700","border","border-gray-600","rounded","px-3","py-2","text-sm","focus:border-orange-500","focus:outline-none",3,"ngModelChange","change","ngModel"],["value","libre"],["value","ocupada"],["value","reservada"],["value","mantenimiento"],["class","mt-4 pt-4 border-t border-gray-700",4,"ngIf"],[1,"mt-4","pt-4","border-t","border-gray-700"],[1,"text-xs","text-gray-400"],[1,"text-sm","font-semibold","text-orange-400","mb-2"],[1,"bg-gray-700/50","rounded-lg","p-3","space-y-2"],[1,"text-xs","text-gray-300"],[1,"text-xs","text-orange-400","font-semibold"],[1,"text-center","py-12"],[1,"text-gray-400"]],template:function(e,s){e&1&&(i(0,"div",0)(1,"header",1)(2,"div",2)(3,"h1",3),n(4,"\u{1F37D}\uFE0F Mesas"),a()()(),i(5,"main",4)(6,"div",5)(7,"h2",6),n(8,"Estado de Mesas"),a()(),i(9,"div",7),p(10,U,27,10,"div",8),a(),p(11,$,3,0,"div",9),a(),i(12,"footer",10)(13,"div",11)(14,"span"),n(15,"\xA9 2025 RestauSync. Todos los derechos reservados."),a(),i(16,"span"),n(17,"Desarrollado con \u2764\uFE0F y TailwindCSS"),a()()()()),e&2&&(r(10),u("ngForOf",s.mesas),r(),u("ngIf",!s.mesas.length))},dependencies:[F,T,W,P,R,j,k,N,L,V,A],encapsulation:2,changeDetection:0})},ie=M;export{M as WaiterMesasPageComponent,ie as default};
