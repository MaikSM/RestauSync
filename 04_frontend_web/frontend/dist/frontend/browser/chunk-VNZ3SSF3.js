import{a as B}from"./chunk-TZQFGA7U.js";import{a as M,b as s,c as R,d as F,g as N,h as T,i as D,j as k,k as A,l as V,m as q,n as I,o as L,q as G,s as O}from"./chunk-AG2IGI7A.js";import{a as p}from"./chunk-4XBRS2GN.js";import{a as w}from"./chunk-GONPXOC7.js";import"./chunk-ASKH5DUS.js";import"./chunk-NMI43S2G.js";import{d as P}from"./chunk-UFL7QPX4.js";import"./chunk-7IYL6UTE.js";import{q as E}from"./chunk-JQOZS3TN.js";import{Aa as l,Bb as a,Db as C,Eb as S,Na as x,R as m,Sa as g,Za as u,bb as f,eb as _,fb as h,gb as t,hb as r,ib as d,ma as c,pb as y,qb as b}from"./chunk-CFQE6O6P.js";import"./chunk-4X36HX5K.js";var $=(o,e)=>e.id;function j(o,e){o&1&&(t(0,"div",8),d(1,"div",27),t(2,"span",28),a(3,"Cargando mesas disponibles..."),r()())}function z(o,e){if(o&1&&a(0),o&2){let n=b().$implicit;C(" (",n.ubicacion,") ")}}function H(o,e){if(o&1&&(t(0,"option",30),a(1),g(2,z,1,1),r()),o&2){let n=e.$implicit;u("value",n.id),l(),S(" Mesa ",n.numero," - Capacidad: ",n.capacidad," personas "),l(),f(n.ubicacion?2:-1)}}function J(o,e){if(o&1&&(t(0,"select",9)(1,"option",29),a(2,"Selecciona una mesa"),r(),_(3,H,3,4,"option",30,$),r()),o&2){let n=b();l(3),h(n.mesas())}}function K(o,e){o&1&&(t(0,"div",25),d(1,"div",31),a(2," Creando Reserva... "),r())}function Q(o,e){o&1&&(t(0,"span",26)(1,"span"),a(2,"\u{1F3AF}"),r(),a(3," Crear Reserva "),r())}var v=class o{_authService=m(w);_reservasService=m(B);_router=m(P);_formBuilder=m(G);mesas=c([]);hasError=c(!1);isPosting=c(!1);isLoadingMesas=c(!0);reservaForm=this._formBuilder.group({mesa_id:["",[s.required]],cliente_nombre:["",[s.required,s.minLength(2)]],cliente_email:["",[s.required,s.email]],cliente_telefono:["",[s.required,s.pattern(/^\+?[0-9\s\-\(\)]+$/)]],fecha_hora:["",[s.required]],numero_personas:["",[s.required,s.min(1),s.max(20)]],notas:[""]});constructor(){this.loadMesas()}loadMesas(){this._reservasService.getMesas().subscribe({next:e=>{let n=e.filter(i=>i.estado==="libre");this.mesas.set(n),this.isLoadingMesas.set(!1)},error:e=>{console.error("Error loading mesas:",e),p.error("Error al cargar mesas",{description:"No se pudieron cargar las mesas disponibles"}),this.isLoadingMesas.set(!1)}})}onSubmit(){if(this.reservaForm.invalid){p.error("Formulario inv\xE1lido",{description:"Por favor, completa todos los campos requeridos"});return}let e=this.reservaForm.value,n={mesa_id:parseInt(e.mesa_id),cliente_nombre:e.cliente_nombre,cliente_telefono:e.cliente_telefono,fecha_hora:e.fecha_hora,numero_personas:parseInt(e.numero_personas),notas:e.notas||""};this.isPosting.set(!0),this._reservasService.createReserva(n).subscribe({next:i=>{p.success("Reserva creada exitosamente",{description:"Tu reserva ha sido confirmada"}),this._router.navigate(["/"])},error:i=>{console.error("Error creating reserva:",i),p.error("Error al crear reserva",{description:"Por favor, intenta nuevamente"}),this.isPosting.set(!1)}})}getMesaCapacidad(e){return this.mesas().find(i=>i.id===e)?.capacidad||0}getMinDateTime(){let e=new Date;return e.setMinutes(e.getMinutes()-e.getTimezoneOffset()),e.toISOString().slice(0,16)}static \u0275fac=function(n){return new(n||o)};static \u0275cmp=x({type:o,selectors:[["private-reservas-page"]],decls:44,vars:5,consts:[[1,"min-h-screen","bg-gray-900","py-8"],[1,"max-w-2xl","mx-auto","px-4","sm:px-6","lg:px-8"],[1,"bg-gray-800/50","backdrop-blur-sm","shadow-2xl","rounded-3xl","overflow-hidden","border","border-orange-500/20"],[1,"px-6","py-6","bg-gradient-to-r","from-orange-500","to-orange-600","text-white"],[1,"text-3xl","font-bold","text-center"],[1,"text-orange-100","text-center","mt-2"],[1,"p-8","space-y-8",3,"ngSubmit","formGroup"],["for","mesa_id",1,"block","text-lg","font-semibold","text-orange-400","mb-3"],[1,"flex","items-center","space-x-3"],["id","mesa_id","formControlName","mesa_id",1,"w-full","px-4","py-3","bg-gray-700/50","border","border-orange-500/30","rounded-xl","text-gray-100","placeholder-gray-400","focus:outline-none","focus:ring-2","focus:ring-orange-500","focus:border-orange-500","transition-all","duration-300"],["for","cliente_nombre",1,"block","text-lg","font-semibold","text-orange-400","mb-3"],["type","text","id","cliente_nombre","formControlName","cliente_nombre","placeholder","Ingresa tu nombre completo",1,"w-full","px-4","py-3","bg-gray-700/50","border","border-orange-500/30","rounded-xl","text-gray-100","placeholder-gray-400","focus:outline-none","focus:ring-2","focus:ring-orange-500","focus:border-orange-500","transition-all","duration-300"],["for","cliente_email",1,"block","text-lg","font-semibold","text-orange-400","mb-3"],["type","email","id","cliente_email","formControlName","cliente_email","placeholder","tu@email.com",1,"w-full","px-4","py-3","bg-gray-700/50","border","border-orange-500/30","rounded-xl","text-gray-100","placeholder-gray-400","focus:outline-none","focus:ring-2","focus:ring-orange-500","focus:border-orange-500","transition-all","duration-300"],["for","cliente_telefono",1,"block","text-lg","font-semibold","text-orange-400","mb-3"],["type","tel","id","cliente_telefono","formControlName","cliente_telefono","placeholder","+57 300 123 4567",1,"w-full","px-4","py-3","bg-gray-700/50","border","border-orange-500/30","rounded-xl","text-gray-100","placeholder-gray-400","focus:outline-none","focus:ring-2","focus:ring-orange-500","focus:border-orange-500","transition-all","duration-300"],["for","fecha_hora",1,"block","text-lg","font-semibold","text-orange-400","mb-3"],["type","datetime-local","id","fecha_hora","formControlName","fecha_hora",1,"w-full","px-4","py-3","bg-gray-700/50","border","border-orange-500/30","rounded-xl","text-gray-100","focus:outline-none","focus:ring-2","focus:ring-orange-500","focus:border-orange-500","transition-all","duration-300",3,"min"],["for","numero_personas",1,"block","text-lg","font-semibold","text-orange-400","mb-3"],["type","number","id","numero_personas","formControlName","numero_personas","min","1","max","20",1,"w-full","px-4","py-3","bg-gray-700/50","border","border-orange-500/30","rounded-xl","text-gray-100","focus:outline-none","focus:ring-2","focus:ring-orange-500","focus:border-orange-500","transition-all","duration-300"],["for","notas",1,"block","text-lg","font-semibold","text-orange-400","mb-3"],["id","notas","formControlName","notas","rows","4","placeholder","Alergias, preferencias especiales, etc.",1,"w-full","px-4","py-3","bg-gray-700/50","border","border-orange-500/30","rounded-xl","text-gray-100","placeholder-gray-400","focus:outline-none","focus:ring-2","focus:ring-orange-500","focus:border-orange-500","transition-all","duration-300","resize-none"],[1,"flex","space-x-6","pt-8"],["type","button","routerLink","/",1,"flex-1","bg-gray-700/50","hover:bg-gray-600/50","border","border-gray-600/50","hover:border-gray-500/50","text-gray-300","hover:text-gray-200","py-4","px-6","rounded-2xl","font-semibold","transition-all","duration-300","transform","hover:scale-105","hover:-translate-y-1","shadow-lg","hover:shadow-orange-500/10"],["type","submit",1,"flex-1","bg-gradient-to-r","from-orange-500","to-orange-600","hover:from-orange-600","hover:to-orange-700","text-white","py-4","px-6","rounded-2xl","font-bold","shadow-2xl","hover:shadow-orange-500/25","transition-all","duration-300","transform","hover:scale-105","hover:-translate-y-1","disabled:opacity-50","disabled:cursor-not-allowed","disabled:transform-none","disabled:shadow-none",3,"disabled"],[1,"flex","items-center","justify-center"],[1,"flex","items-center","justify-center","gap-2"],[1,"animate-spin","rounded-full","h-5","w-5","border-b-2","border-orange-500"],[1,"text-gray-300"],["value","",1,"bg-gray-800"],[1,"bg-gray-800",3,"value"],[1,"animate-spin","rounded-full","h-5","w-5","border-b-2","border-white","mr-3"]],template:function(n,i){n&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),a(5,"Hacer una Reserva"),r(),t(6,"p",5),a(7,"Completa el formulario para reservar tu mesa"),r()(),t(8,"form",6),y("ngSubmit",function(){return i.onSubmit()}),t(9,"div")(10,"label",7),a(11," Seleccionar Mesa "),r(),g(12,j,4,0,"div",8)(13,J,5,0,"select",9),r(),t(14,"div")(15,"label",10),a(16," Nombre Completo "),r(),d(17,"input",11),r(),t(18,"div")(19,"label",12),a(20," Correo Electr\xF3nico "),r(),d(21,"input",13),r(),t(22,"div")(23,"label",14),a(24," Tel\xE9fono "),r(),d(25,"input",15),r(),t(26,"div")(27,"label",16),a(28," Fecha y Hora "),r(),d(29,"input",17),r(),t(30,"div")(31,"label",18),a(32," N\xFAmero de Personas "),r(),d(33,"input",19),r(),t(34,"div")(35,"label",20),a(36," Notas Especiales (Opcional) "),r(),d(37,"textarea",21),r(),t(38,"div",22)(39,"button",23),a(40," Cancelar "),r(),t(41,"button",24),g(42,K,3,0,"div",25)(43,Q,4,0,"span",26),r()()()()()()),n&2&&(l(8),u("formGroup",i.reservaForm),l(4),f(i.isLoadingMesas()?12:13),l(17),u("min",i.getMinDateTime()),l(12),u("disabled",i.isPosting()||i.reservaForm.invalid),l(),f(i.isPosting()?42:43))},dependencies:[E,O,N,V,q,M,T,A,R,F,L,I,D,k],encapsulation:2,changeDetection:0})},de=v;export{v as PrivateReservasPageComponent,de as default};
