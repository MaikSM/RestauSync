<div class="bg-gray-900 text-gray-100 min-h-screen p-4 sm:p-6 overflow-x-hidden">
  <!-- Encabezado responsivo -->
  <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 border-b-2 border-orange-500 p-4 bg-gray-800 shadow-md mb-6 rounded-lg">
    <h1 class="text-center sm:text-left text-2xl sm:text-3xl font-bold text-white">
      üë§ Roles
    </h1>
    <div class="w-full sm:w-auto">
      <a
        class="btn btn-sm sm:btn-md bg-orange-500 hover:bg-orange-600 text-white w-full sm:w-auto whitespace-nowrap"
        routerLink="/admin/roles/create"
      >
        ‚ûï Crear Rol
      </a>
    </div>
  </div>

  @if (rolesResource.error()) {
    <is-error />
  } @else if (rolesResource.isLoading()) {
    <is-loading />
  } @else if (rolesResource.hasValue()) {
    <!-- Vista m√≥vil: tarjetas (oculta en md+) -->
    <div class="md:hidden grid grid-cols-1 sm:grid-cols-2 gap-3">
      @for (role of rolesResource.value(); track role.id) {
        <div class="bg-gray-800 border border-gray-700 rounded-lg p-4 shadow">
          <div class="flex items-start justify-between gap-2">
            <div class="min-w-0">
              <h2 class="text-lg font-semibold text-orange-400 break-words">
                {{ role.name }}
              </h2>
              @if (role.description) {
                <p class="mt-1 text-sm text-gray-300 break-words">
                  {{ role.description }}
                </p>
              }
            </div>
            <span class="text-xs px-2 py-1 bg-gray-700 text-gray-200 rounded">
              ID: {{ role.id }}
            </span>
          </div>

          <div class="mt-3 flex items-center justify-between text-sm">
            <span class="text-gray-300">
              Usuarios: <span class="font-semibold">{{ role.users?.length || 0 }}</span>
            </span>
            <span
              class="text-[11px] px-2 py-1 rounded-full"
              [class.bg-green-600]="(role.users?.length || 0) > 0"
              [class.text-white]="(role.users?.length || 0) > 0"
              [class.bg-gray-700]="(role.users?.length || 0) === 0"
              [class.text-gray-200]="(role.users?.length || 0) === 0"
            >
              {{ (role.users?.length || 0) > 0 ? 'En uso' : 'Sin usuarios' }}
            </span>
          </div>

          <div class="mt-3 flex gap-2">
            <button
              class="bg-orange-500 hover:bg-orange-600 text-white px-3 py-1.5 rounded text-sm transition w-full"
              (click)="onEditRole(role.id)"
              [disabled]="isForbidden(role.id)"
              [class.opacity-70]="isForbidden(role.id)"
              title="Editar rol"
            >
              ‚úèÔ∏è Editar
            </button>
            <button
              class="bg-red-600 hover:bg-red-700 text-white px-3 py-1.5 rounded text-sm transition w-full"
              (click)="onDeleteRole(role.id)"
              [disabled]="isForbidden(role.id)"
              [class.opacity-70]="isForbidden(role.id)"
              title="Eliminar rol"
            >
              üóëÔ∏è Eliminar
            </button>
          </div>
        </div>
      }
    </div>

    <!-- Tabla en escritorio (oculta en m√≥vil) -->
    <div class="hidden md:block">
      <admin-roles-table [roles]="rolesResource.value()" />
    </div>
  } @else if (!rolesResource.hasValue()) {
    <is-empty />
  }
</div>
